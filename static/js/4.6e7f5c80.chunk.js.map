{"version":3,"sources":["components/Content/Books/Book-Components/BookSubInfo.js"],"names":["GR_KEY","API_CALLS","BookSubInfo","props","_this","Object","C_Users_Dan_Desktop_Coding_Projects_react_best_selling_books_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_Dan_Desktop_Coding_Projects_react_best_selling_books_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_Dan_Desktop_Coding_Projects_react_best_selling_books_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","rating","id","fetch","concat","isbn","then","response","text","str","window","DOMParser","parseFromString","data","querySelector","textContent","avgRating","setState","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","href","buyLnk","url","rel","target","_Rating__WEBPACK_IMPORTED_MODULE_6__","Component"],"mappings":"qKAIQA,QAAWC,EAAS,GAApBD,OAGFE,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,OAAQ,EACRC,GAAI,IAJWT,mFAQjB,IAAIA,EAAQG,KACZO,MAAK,GAAAC,OAZI,uCAYJ,mDAAAA,OACsDf,EADtD,OAAAe,OACkER,KAAKJ,MAAMa,OAE/EC,KAAK,SAAAC,GAAQ,OAAIA,EAASC,SAC1BF,KAAK,SAAAG,GAAG,OAAI,IAAIC,OAAOC,WAAYC,gBAAgBH,EAAK,cACxDH,KAAK,SAAAO,GACJ,GAA+D,MAA3DA,EAAKC,cAAc,wBAAwBC,YAA/C,CAGA,IAAIb,EAAKW,EAAKC,cAAc,6BAA6BC,YACrDC,EAAYH,EAAKC,cAAc,+BAA+BC,YAClEtB,EAAMwB,SAAS,CAAChB,OAAQe,EAAWd,GAAIA,wCAK3C,OACEgB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbH,EAAAC,EAAAC,cAAA,KACEC,UAAU,gBACVC,KAAM1B,KAAKJ,MAAM+B,OAAOC,IACxBC,IAAI,sBACJC,OAAO,UAJT,iBAQAR,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACbH,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAQ1B,OAAQL,KAAKI,MAAMC,UAE7BiB,EAAAC,EAAAC,cAAA,KACEE,KAAI,uCAAAlB,OAAyCR,KAAKI,MAAME,IACxDuB,IAAI,sBACJC,OAAO,UAHT,wBAvCkBE,aAkDXrC","file":"static/js/4.6e7f5c80.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Rating from './Rating';\r\nimport API_CALLS from \"../../../Utils/APICalls\";\r\n\r\nconst { GR_KEY } = API_CALLS[\"GR\"];\r\nconst CORS = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\nclass BookSubInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      rating: 0,\r\n      id: \"\"\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    let _this = this;\r\n    fetch(\r\n      `${CORS}https://www.goodreads.com/search/index.xml?key=${GR_KEY}&q=${this.props.isbn}`\r\n    )\r\n      .then(response => response.text())\r\n      .then(str => new window.DOMParser().parseFromString(str, \"text/xml\"))\r\n      .then(data => {\r\n        if (data.querySelector(\"search total-results\").textContent === \"0\") {\r\n          return \r\n        }\r\n        let id = data.querySelector(\"results work best_book id\").textContent;\r\n        let avgRating = data.querySelector(\"results work average_rating\").textContent;\r\n        _this.setState({rating: avgRating, id: id})\r\n        return;\r\n      });\r\n}\r\n  render() {\r\n    return (\r\n      <div className=\"book-container__sub-info\">\r\n        <a\r\n          className=\"book-buy-link\"\r\n          href={this.props.buyLnk.url}\r\n          rel=\"noopener noreferrer\"\r\n          target=\"_blank\"\r\n        >\r\n          Buy this Book\r\n        </a>\r\n        <div className=\"sub-info__rating\">\r\n          <Rating rating={this.state.rating}/>\r\n        </div>\r\n        <a\r\n          href={`https://www.goodreads.com/book/show/${this.state.id}`}\r\n          rel=\"noopener noreferrer\"\r\n          target=\"_blank\"\r\n        >\r\n          Read Reviews\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default BookSubInfo;\r\n"],"sourceRoot":""}